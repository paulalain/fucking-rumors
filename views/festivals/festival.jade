extends ../layout/layout

block content
 div(id="festivalDiv", ng-controller="festivalController")
  div-loading(div-loading="waiting")
   div.page-header
    h1 {{festival.name}} 
     small {{ festival.editionInUse.date.start | date: 'dd/MM/yyyy' }} au {{ festival.editionInUse.date.end | date: 'dd/MM/yyyy' }}
     small {{festival.location.city}}  ({{festival.location.country}})
    a(href="/festivals")
     span.glyphicon.glyphicon-arrow-left
     span Revenir à la liste des festivals
   if admin && loggedIn
    div
     div.btn-toolbar.btn-toolbar-right
      a.btn.btn-sm.btn-white(ng-click="toggleUpdateFestival()", role="bouton") Modifier le festival
      a.btn.btn-sm.btn-white(ng-click="toggleAddEdition()", role="bouton") Ajouter une édition
      a.btn.btn-sm.btn-white(ng-click="toggleAddRumor()", role="bouton") Ajouter une rumeur à l'édition courante
     div(bn-slide-show="isVisibleAddEdition" id="addEditionDiv")
      include ../edition/ajouteredition.jade
     div.hide(bn-slide-show="isVisibleUpdateFestival" id="addFestivalForm")
      include ./ajouterfestival.jade
     div.hide(bn-slide-show="isVisibleAddRumor" id="addRumorForm")
      include ../rumors/addRumor.jade
   div
    h2 Les artistes
    span TODO
   div
    h2 Liste des éditions
    ul.list-group(id="editionList")
     li.list-group-item.row(ng-repeat="item in festival.editions")
      div.col-xs-6.col-sm-8.col-md-9.col-lg-10
        a(href="/festivals/{{id}}/{{festival.name}}/{{item.id}}/") {{item.year}}
      div.col-xs-6.col-sm-4.col-md-3.col-lg-2.btn-toolbar
       if admin && loggedIn
        a.btn.btn-danger.btn-sm.pull-right.delete-edition(role="button", href="/editions/supprimer/{{item.id}}") Supprimer
